<% if current_user.try(:admin?) %>
    <h1>管理者権限でのログイン</h1>
<% else %>
    <h1>一般ユーザーでのログイン</h1>
<% end %>
<p><%= notice %></p>
<table>
    <tr>
        <th>投稿内容</th>
    </tr>
    <% @topicks.each do |topick| %>
    <tr>
        <td><%= topick.content %></td>
        <td><%= link_to '掲示板を確認する', topick_path(topick.id) %></td>
        <td><%= link_to "投稿した掲示板を編集する", edit_topick_path(topick.id), data: { confirm: '本当に編集していいですか？' } %></td>
        <td><%= link_to '投稿した掲示板を削除する', topick_path(topick.id), method: :delete ,data: { confirm: '本当に削除していいですか？' }%></td>
    </tr>
    <% end %>
</table>

<%= link_to '掲示板一覧画面に戻る', topicks_path %>
<%= link_to '新しく掲示板を投稿する', new_topick_path %>

<h1>コメント機能<h1>
<div class="container">
    <p id="notice"><%= notice %></p>
    <div class="topick-text">
    <p><strong>内容</strong>：<%= @topick.content %></p>
</div>
    <p>コメント一覧（ここから下の内容が重要）</p>
    <!-- このcomments_areaというHTMLのidを取得して、そのdivの部分だけを更新する -->
    <div id="comments_area">
    <!-- 投稿されたコメント一覧をトピックの詳細ページに表示するためのrender -->
    <%= render partial: 'comments/index', locals: { comments: @comments, topick: @topick } %>
</div>
    <!-- コメント入力欄をトピックの詳細ページに表示するためのrender -->
    <%= render partial: 'comments/form', locals: { comment: @comment, topick: @topick } %>
    <%= link_to '編集', edit_topick_path(@topick) %> |
    <%= link_to '戻る', topicks_path %>
</div>