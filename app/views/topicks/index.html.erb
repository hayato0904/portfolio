<div class="container">
<% if current_user.try(:admin?) %>
    <p>管理者権限でのログイン</p>
    <%= link_to '管理画面へ', rails_admin_path %>
<% else %>
    <p class="page-header">一般ユーザーでのログイン</p>
<% end %>

<%# <p> notice </p> %>
<%# # 上記はログインした時に「アカウント登録が完了しました」などメッセージが出るコード。かさばるので削除した。 %>
<div class="main">
<div class="alert alert-info" role="alert">FLOATINGにようこそ。まずは掲示板に投稿をしてみましょう。「新しく掲示板を投稿する」をクリックしてください。すべてはそこから始まります。</div>

<%# <button type="button" class="btn btn-primary btn-lg active">Primary button</button> %>
<%= link_to 'TOPに戻る', topicks_path %>
<%= link_to '新しく掲示板を投稿する', new_topick_path %>
<%= link_to '自分がお気に入りにしたものを見つける', favorites_path %>
<%= link_to 'ユーザーのマイページに行く', user_path(current_user.id) %>
<%# 後でめも %>


    <%= search_form_for @q, url: topicks_path do |f| %>
    <%= f.label :name, '名前を検索' %>
    <%= f.search_field :user_name_cont %> <br>
    <%= f.submit '検索' %> 
<% end %>

<table class = "table table-condensed">
<%# テーブルのデザインだから、tableタグで囲まないといけない %>

    <tr>
        <th class= "info">名前</th>
        <th class= "info">アイコン</th>
        <th class = "info">投稿内容</th>
        <th class = "info">コメント画面へ</th>
        <th class = "info">自分の投稿を編集</th>
        <th class = "info">自分の投稿を削除</th>
    </tr>
    
    <% @topicks.each do |topick| %>
    <tr>
        <td class = "info"><%= topick.user.name %></td>

        <% if topick.user.image.present? %> 
        <%# 上記一行は現在エラーが出ていない状態 %>
        <p>
            <td class = "info"><%= image_tag topick.user.image.url %></td>

        <% else %>
            <td class = "info"><%= image_tag 'noimage.jpg'%></td>
        </p>
        <% end %>

        <td class = "info"><%= topick.content %></td>
        <td class = "info"><%= link_to '投稿にコメントする', topick_path(topick.id) %></td>
        <%# <% if 掲示板がログインしているユーザーで作成されたか？ %>
        <td class = "info"><% if current_user == topick.user %>
            <%= link_to "投稿した掲示板を編集する", edit_topick_path(topick.id), data: { confirm: '本当に編集していいですか？' } %>
        <% end %></td>
        <td class = "info"><% if current_user == topick.user %>
            <%= link_to '投稿した掲示板を削除する', topick_path(topick.id), method: :delete ,data: { confirm: '本当に削除していいですか？' }%>
        <% end %></td>
    </tr>
    <% end %>
</table>
</div>

</div>